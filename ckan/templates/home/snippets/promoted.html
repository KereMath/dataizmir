<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anasayfa</title>
  <style>
    /* === ALAN DÜZENİ === */
    .module-content {
      margin-top: 60px !important;
      position: relative;
    }

    .title-area {
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .title-area h1 {
      color: #000;
      font-family: Labrada !important;
      font-weight: 700 !important;
      font-size: 54px !important;
      line-height: 60px !important;
      letter-spacing: 0% !important;
      text-align: left !important;
      margin: 0;
    }

    .icon-area {
      position: absolute;
      top: 140px;
      left: 10px;
      display: flex;
      gap: 8px;
    }

    .content-container {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      gap: 30px;
      margin-top: 60px !important;
      margin-bottom: 20px;
    }

    .matrix-image-container {
      width: 35%;
      margin-top: 30px;
    }

    .matrix-image {
      width: 100%;
      height: auto;
    }

    .body-text {
      margin-top: 35px;
      flex: 1;
      font-family: Labrada;
      font-weight: 500;
      font-size: 18px;
      line-height: 30px;
      letter-spacing: 0%;
      color: black !important;
      max-width: 42.5%;
      margin-left: -6%;
    }

    .textmid {
      margin-left: 0%;
      margin-top: 45px;
      max-width: 25%;
    }

    /* === RESPONSIVE === */
    @media (max-width: 768px) {
      .title-area {
        height: auto;
        padding: 20px 10px;
        text-align: center;
      }

      .title-area h1 {
        font-size: 32px !important;
        line-height: 38px !important;
        text-align: center !important;
      }

      .content-container {
        flex-direction: column;
        align-items: center;
        gap: 20px;
        margin-top: 30px !important;
      }

      .matrix-image-container {
        width: 80%;
        margin-top: 0;
      }

      .textmid {
        margin-left: 0 !important;
        margin-top: 20px !important;
        max-width: 90% !important;
        width: 100%;
      }

      .textmid > div:first-child {
        max-width: 100% !important;
        min-width: unset !important;
        margin-left: 0 !important;
      }

      .textmid > div:nth-child(2) {
        width: 100% !important;
        margin-left: 0 !important;
      }

      .body-text {
        max-width: 90% !important;
        margin-left: 0 !important;
        font-size: 16px;
        line-height: 28px;
      }

      .icon-area {
        position: static;
        margin-top: 20px;
        justify-content: center;
      }
    }
  </style>
</head>
<body>

<div class="module-content">

  <!-- Başlık -->
  <div class="title-area">
    <h1 class="page-heading">
      {{ h.render_markdown(title) }}
    </h1>
  </div>

  <div class="content-container">

    <!-- Sol: görsel -->
    <div class="matrix-image-container">
      <img src="https://dataizmir.izka.org.tr/matrix.png" alt="Matrix" class="matrix-image">
      <div class="stats-wrapper" style="display:none!important;margin-top:-30px;margin-right:-45px;">
        {% block stats %}{% snippet 'home/snippets/stats.html' %}{% endblock %}
      </div>
    </div>

    <!-- Sağ: kutular -->
    <div class="textmid">

      <!-- Veri seti sayısı kutusu -->
      <div style="max-width:60%;min-width:60%;padding:2px 4px;
                  border:2px solid #101752;border-radius:10px;
                  display:flex;justify-content:center;align-items:center;margin-left:5%;">
        <span style="font-family:'Labrada',sans-serif;font-weight:700;
                     font-size:45px;line-height:37px;text-align:center;">
          <span id="dataset-count-main">0</span> Veri Seti
        </span>
      </div>

      <!-- Veri kategorileri kutusu -->
      <div style="background:#221D5D;color:#FFF;border-radius:12px;padding:9px;
                  display:flex;flex-direction:column;gap:20px;width:110%;
                  margin-top:21px;margin-left:-37%;">
        <p style="margin:0;font-family:'Labrada',sans-serif;font-weight:600;
                  font-size:24px;line-height:28px;text-align:left;">
          Veri Kategorilerini<br>Keşfedin
        </p>
        <div style="display:flex;align-items:center;gap:32px;flex-wrap:wrap;margin-top:-15px;">
          <div style="flex:0 0 30%;text-align:center;">
            <span style="font-family:'Izmir',sans-serif;font-weight:700;font-size:40px;line-height:50px;">
              20+
            </span>
          </div>
          <div style="flex:1;">
            <p style="margin:0;font-family:'Labrada',sans-serif;font-weight:500;
                      font-size:12px;line-height:24px;">
              Platforma üye olarak veri setlerinizi ekleyebilirsiniz
            </p>
          </div>
        </div>
      </div>

    </div><!-- /textmid -->

    <!-- Gövde markdown -->
    <div class="body-text">
      {{ h.render_markdown(intro) }}
      {% block search %}{% snippet 'home/snippets/search.html' %}{% endblock %}
    </div>

  </div><!-- /content-container -->

  <div class="icon-area"><!-- ikonlar buraya --></div>
</div><!-- /module-content -->

<!-- Dataset sayısını çek ve güncelle -->
<script>
  fetch('/api/3/action/package_search?rows=0&include_private=true', {
    credentials: 'include'
  })
  .then(function(response) { return response.json(); })
  .then(function(data) {
    if (data.success && data.result && typeof data.result.count === 'number') {
      var countElement = document.getElementById('dataset-count-main');
      if (countElement) {
        countElement.textContent = data.result.count;
      }
    }
  })
  .catch(function(error) {
    console.error('Dataset sayısı alınırken hata:', error);
  });
</script>

</body>
</html>
